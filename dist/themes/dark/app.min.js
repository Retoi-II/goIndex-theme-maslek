function init(){document.siteName=$("title").html(),$("body").addClass(`mdui-theme-primary-${ThemeConfig.main_color} mdui-theme-accent-${ThemeConfig.accent_color}`);var e="",t=window.MODEL,a=window.current_drive_order||0,l=window.drive_names,s=`
                    <div class="titleBar_item search_bar">
                        <a class="titleBar_link searchBar_link" onclick="if($('.search_bar').hasClass('searchBar_link') && $('.searchBar_form>input').val()) $('.searchBar_form').submit();">
                            <i class="mdui-icon material-icons"></i>
                        </a>
                        <form class="searchBar_form titleBar_exhibit" method="get" action="/${a}:search">
                            <input type="text" name="q" placeholder="Search in current drive" value="${t.is_search_page&&t.q||""}" />
                        </form>
                    </div>`,d=`
                    <div class="titleBar_item titleBar_pan">
                        <a class="titleBar_link panBar_link"><i></i></a>
                        <div class="menu_list titleBar_exhibit"><p>Netdisc Drive</p>`;l.forEach((e,t)=>{d+=`<a  class="menu_list_item"  href="/${t}:/">${e}</a>`}),d+=`
                        </div>
                    </div>`;var n=`
        <div class="titleBar_item titleBar_menu">
          <a class="titleBar_link"><i></i></a>
          <div class="menu_list titleBar_exhibit"><p>Menu</p>`;for(let r=0;r<ThemeConfig.menus.length;r++)n+=`<a class="menu_list_item" href="${ThemeConfig.menus[r].url}" target="_blank">${ThemeConfig.menus[r].name}</a>`;n+=`
          </div>
        </div>`,e=`
<div class="bimg"></div>
<header class="titleBar">
  <dir class="titleBar_container">
    <div class="titleBar_avatar">
      <a class="titleBar_item" href="/">
        <img src="${ThemeConfig.avatar}">
      </a>
    </div>
    <div class="titleBar_nav">
      <div class="titleBar_nav_end">`+d+s,ThemeConfig.menu_show?e+=n+"</div>":e+="</div>",e+=`
    </div>
  </dir>
</header>`,e+=`
<div class="mdui-container">
  <div class="mdui-container-fluid">
    <div id="nav" class="mdui-toolbar nexmoe-item nav-style"> </div>
    </div>
  <div class="mdui-container-fluid">
    <div id="head_md" class="mdui-typo nexmoe-item" style="display:none;padding: 20px 0;"></div>
    <div id="content" class="nexmoe-item"></div>
    <div id="readme_md" class="mdui-typo nexmoe-item" style="display:none; padding: 20px 0;"></div>
  </div>
</div>
<br><br><br><br><br>`,$("body").html(e),$("#readme_md").hide().html(""),$("#head_md").hide().html("")}document.write('<link rel="stylesheet" href="'+ThemeConfig.url+'/dist/css/app.6461726b.css">'),document.write('<script src="//cdn.jsdelivr.net/npm/hls.js@1.0.7/dist/hls.min.js"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/dashjs@4.0.1/dist/dash.all.debug.min.js"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/flv.js@1.6.1/dist/flv.min.js"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/cdnbye@latest"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/dplayer@1.26.0/dist/DPlayer.min.js"></script>'),document.write('<script src="//cdn.rawgit.com/video-dev/hls.js/18bb552/dist/hls.min.js"></script>'),document.write('<script src="//cdn.dashjs.org/latest/dash.all.min.js"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/plyr@3.6.8/dist/plyr.min.js"></script>'),document.write('<script src="//cdn.jsdelivr.net/npm/markdown-it@12.1.0/dist/markdown-it.min.js"></script>'),document.write("<style>.bimg{background-image: url("+ThemeConfig.bimg+");}.mdui-appbar .mdui-toolbar{height:56px;font-size:1pc}.mdui-toolbar>*{padding:0 6px;margin:0 2px}.mdui-toolbar>i{opacity:.5}.mdui-toolbar>i{padding:0}.mdui-toolbar>a:hover,a.active,a.mdui-typo-headline{opacity:1}.mdui-list-item{transition:none}.mdui-list>.th{background-color:initial}.mdui-list-item>a{width:100%;line-height:3pc}.mdui-list-item{margin:2px 0;padding:0}.mdui-toolbar>a:last-child{opacity:1}.mdui-container{width:100%!important;margin:0 auto;}</style>");const Os={isWindows:navigator.platform.toUpperCase().indexOf("WIN")>-1,isMac:navigator.platform.toUpperCase().indexOf("MAC")>-1,isMacLike:/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),isIos:/(iPhone|iPod|iPad)/i.test(navigator.platform),isMobile:/Android|webOS|iPhone|iPad|iPod|iOS|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};function getDocumentHeight(){var e=document;return Math.max(e.body.scrollHeight,e.documentElement.scrollHeight,e.body.offsetHeight,e.documentElement.offsetHeight,e.body.clientHeight,e.documentElement.clientHeight)}function render(e){e.indexOf("?")>0&&(e=e.substr(0,e.indexOf("?"))),title(e),nav(e),window.MODEL.is_search_page?(window.scroll_status={event_bound:!1,loading_lock:!1},render_search_result_list()):e.match(/\/\d+:$/g)||"/"==e.substr(-1)?(window.scroll_status={event_bound:!1,loading_lock:!1},list(e)):file(e)}function title(e){e=decodeURI(e);var t=window.current_drive_order||0,a=window.drive_names[t];e=e.replace(`/${t}:`,"");var l=window.MODEL;l.is_search_page?$("title").html(`${document.siteName} - ${a} - 搜索 ${l.q} 的结果`):$("title").html(`${document.siteName} - ${a} - ${e}`)}function nav(e){var t=window.MODEL,a="",l=window.current_drive_order||0;if(window.drive_names,a+=`<a href="/${l}:/" class="mdui-typo-headline folder">/</a>`,!t.is_search_page){var s=e.trim("/").split("/"),d="/";if(s.length>1)for(i in s.shift(),s){var n=s[i];if(d+=(n=decodeURI(n))+"/",""==n)break;a+=`<i class="mdui-icon material-icons mdui-icon-dark folder" style="margin:0;">chevron_right</i><a class="folder" href="/${l}:${d}">${n}</a>`}}$("#nav").html(a),mdui.mutation(),mdui.updateTextFields()}function requestListPath(e,t,a,l){var s={password:t.password||null,page_token:t.page_token||null,page_index:t.page_index||0};$.post(e,s,function(t,d){var n=jQuery.parseJSON(t);n&&n.error&&"401"==n.error.code?l&&l(e):n&&n.data&&a&&a(n,e,s)})}function requestSearch(e,t){var a={q:e.q||null,page_token:e.page_token||null,page_index:e.page_index||0};$.post(`/${window.current_drive_order}:search`,a,function(e,l){var s=jQuery.parseJSON(e);s&&s.data&&t&&t(s,a)})}function list(e){var t=`
    <div class="mdui-row"> 
    <ul class="mdui-list"> 
     <li class="mdui-list-item th"> 
      <div class="mdui-col-xs-12 mdui-col-sm-7">
       Nama File
  <i class="mdui-icon material-icons icon-sort" data-sort="name" data-order="more">expand_more</i>
      </div> 
      <div class="mdui-col-sm-3 mdui-text-right">
       Terakhir Diubah
  <i class="mdui-icon material-icons icon-sort" data-sort="date" data-order="downward">expand_more</i>
      </div> 
      <div class="mdui-col-sm-2 mdui-text-right">
       Ukuran
  <i class="mdui-icon material-icons icon-sort" data-sort="size" data-order="downward">expand_more</i>
      </div> 
      </li> 
    </ul> 
   </div> 
   <div class="mdui-row"> 
    <ul id="list" class="mdui-list"> 
    </ul> 
    <div id="count" class="mdui-hidden mdui-center mdui-text-center mdui-m-b-3 mdui-typo-subheading mdui-text-color-blue-grey-500">Menampilkan <span class="number"></span> item</div>
   </div>
  `;$("#content").html(t);var a=localStorage.getItem("password"+e);function l(e,t,a){$("#list").data("nextPageToken",e.nextPageToken).data("curPageIndex",e.curPageIndex),$("#spinner").remove(),null===e.nextPageToken?($(window).off("scroll"),window.scroll_status.event_bound=!1,window.scroll_status.loading_lock=!1,append_files_to_list(t,e.data.files)):(append_files_to_list(t,e.data.files),!0!==window.scroll_status.event_bound&&($(window).on("scroll",function(){var e=$(this).scrollTop(),s=getDocumentHeight(),d=$(this).height();if(e+d>s-(Os.isMobile?130:80)){if(!0===window.scroll_status.loading_lock)return;window.scroll_status.loading_lock=!0,$('<div id="spinner" class="mdui-spinner mdui-spinner-colorful mdui-center"></div>').insertBefore("#readme_md"),mdui.updateSpinners();let n=$("#list");requestListPath(t,{password:a.password,page_token:n.data("nextPageToken"),page_index:n.data("curPageIndex")+1},l,null)}}),window.scroll_status.event_bound=!0)),!0===window.scroll_status.loading_lock&&(window.scroll_status.loading_lock=!1)}$("#list").html('<div class="mdui-progress"><div class="mdui-progress-indeterminate"></div></div>'),requestListPath(e,{password:a},l,function(e){$("#spinner").remove();var t=prompt("目录加密, 请输入密码","");localStorage.setItem("password"+e,t),null!=t&&""!=t?list(e):history.go(-1)})}function append_files_to_list(e,t){var a=$("#list"),l=null===a.data("nextPageToken"),s="0"==a.data("curPageIndex");html="";let d=[];for(i in t){var n=t[i],r=e+n.name+"/";if(void 0==n.size&&(n.size=""),n.modifiedTime=utc2beijing(n.modifiedTime),n.size=formatFileSize(n.size),"application/vnd.google-apps.folder"==n.mimeType)html+=`<li class="mdui-list-item mdui-ripple"><a href="${r}" class="folder">
              <div class="mdui-col-xs-12 mdui-col-sm-7 mdui-text-truncate" title="${n.name}">
              <i class="mdui-icon material-icons">folder_open</i>
                ${n.name}
              </div>
              <div class="mdui-col-sm-3 mdui-text-right">${n.modifiedTime}</div>
              <div class="mdui-col-sm-2 mdui-text-right">${n.size}</div>
              </a>
          </li>`;else{var r=e+n.name;let o=e+n.name;var c="file";l&&"README.md"==n.name&&get_file(r,n,function(e){markdown("#readme_md",e)}),"HEAD.md"==n.name&&get_file(r,n,function(e){markdown("#head_md",e)});var m=r.split(".").pop().toLowerCase();let u=ThemeConfig.view;u.indexOf(`|${m}|`)>=0&&(d.push(o),r+="?a=view",c+=" view"),html+=`<li class="mdui-list-item file mdui-ripple" target="_blank"><a gd-type="${n.mimeType}" href="${r}" class="${c}">
            <div class="mdui-col-xs-12 mdui-col-sm-7 mdui-text-truncate" title="${n.name}">
            <i class="mdui-icon material-icons">insert_drive_file</i>
              ${n.name}
            </div>
            <div class="mdui-col-sm-3 mdui-text-right">${n.modifiedTime}</div>
            <div class="mdui-col-sm-2 mdui-text-right">${n.size}</div>
            </a>
        </li>`}}if(d.length>0){let p=localStorage.getItem(e),v=d;if(!s&&p){let f;try{f=JSON.parse(p),Array.isArray(f)||(f=[])}catch(h){f=[]}v=f.concat(d)}localStorage.setItem(e,JSON.stringify(v))}a.html(("0"==a.data("curPageIndex")?"":a.html())+html),l&&$("#count").removeClass("mdui-hidden").find(".number").text(a.find("li.mdui-list-item").length)}function render_search_result_list(){var e=`
   <div class="mdui-row"> 
    <ul class="mdui-list"> 
     <li class="mdui-list-item th"> 
      <div class="mdui-col-xs-12 mdui-col-sm-7">
       Nama File
  <i class="mdui-icon material-icons icon-sort" data-sort="name" data-order="more">expand_more</i>
      </div> 
      <div class="mdui-col-sm-3 mdui-text-right">
       Terakhir Diubah
  <i class="mdui-icon material-icons icon-sort" data-sort="date" data-order="downward">expand_more</i>
      </div> 
      <div class="mdui-col-sm-2 mdui-text-right">
       Ukuran
  <i class="mdui-icon material-icons icon-sort" data-sort="size" data-order="downward">expand_more</i>
      </div> 
      </li> 
    </ul> 
   </div> 
   <div class="mdui-row"> 
    <ul id="list" class="mdui-list"> 
    </ul> 
    <div id="count" class="mdui-hidden mdui-center mdui-text-center mdui-m-b-3 mdui-typo-subheading mdui-text-color-blue-grey-500">Menampilkan <span class="number"></span> item</div>
   </div>
  `;function t(e,a){$("#list").data("nextPageToken",e.nextPageToken).data("curPageIndex",e.curPageIndex),$("#spinner").remove(),null===e.nextPageToken?($(window).off("scroll"),window.scroll_status.event_bound=!1,window.scroll_status.loading_lock=!1,append_search_result_to_list(e.data.files)):(append_search_result_to_list(e.data.files),!0!==window.scroll_status.event_bound&&($(window).on("scroll",function(){var e=$(this).scrollTop(),a=getDocumentHeight(),l=$(this).height();if(e+l>a-(Os.isMobile?130:80)){if(!0===window.scroll_status.loading_lock)return;window.scroll_status.loading_lock=!0,$('<div id="spinner" class="mdui-spinner mdui-spinner-colorful mdui-center"></div>').insertBefore("#readme_md"),mdui.updateSpinners();let s=$("#list");requestSearch({q:window.MODEL.q,page_token:s.data("nextPageToken"),page_index:s.data("curPageIndex")+1},t)}}),window.scroll_status.event_bound=!0)),!0===window.scroll_status.loading_lock&&(window.scroll_status.loading_lock=!1)}$("#content").html(e),$("#list").html('<div class="mdui-progress"><div class="mdui-progress-indeterminate"></div></div>'),requestSearch({q:window.MODEL.q},t)}function append_search_result_to_list(e){var t=$("#list"),a=null===t.data("nextPageToken");for(i in html="",e){var l=e[i];if(void 0==l.size&&(l.size=""),l.modifiedTime=utc2beijing(l.modifiedTime),l.size=formatFileSize(l.size),"application/vnd.google-apps.folder"==l.mimeType)html+=`<li class="mdui-list-item mdui-ripple"><a id="${l.id}" onclick="onSearchResultItemClick(this)" class="folder">
              <div class="mdui-col-xs-12 mdui-col-sm-7 mdui-text-truncate" title="${l.name}">
              <i class="mdui-icon material-icons">folder_open</i>
                ${l.name}
              </div>
              <div class="mdui-col-sm-3 mdui-text-right">${l.modifiedTime}</div>
              <div class="mdui-col-sm-2 mdui-text-right">${l.size}</div>
              </a>
          </li>`;else{var s="file",d=l.name.split(".").pop().toLowerCase();let n=ThemeConfig.view;n.indexOf(`|${d}|`)>=0&&(s+=" view"),html+=`<li class="mdui-list-item file mdui-ripple" target="_blank"><a id="${l.id}" gd-type="${l.mimeType}" onclick="onSearchResultItemClick(this)" class="${s}">
            <div class="mdui-col-xs-12 mdui-col-sm-7 mdui-text-truncate" title="${l.name}">
            <i class="mdui-icon material-icons">insert_drive_file</i>
              ${l.name}
            </div>
            <div class="mdui-col-sm-3 mdui-text-right">${l.modifiedTime}</div>
            <div class="mdui-col-sm-2 mdui-text-right">${l.size}</div>
            </a>
        </li>`}}t.html(("0"==t.data("curPageIndex")?"":t.html())+html),a&&$("#count").removeClass("mdui-hidden").find(".number").text(t.find("li.mdui-list-item").length)}function onSearchResultItemClick(e){var t=$(e).hasClass("view"),a=window.current_drive_order,l=mdui.dialog({title:"",content:'<div class="mdui-text-center mdui-typo-title mdui-m-b-1">正在获取目标路径...</div><div class="mdui-spinner mdui-spinner-colorful mdui-center"></div>',history:!1,modal:!0,closeOnEsc:!0});mdui.updateSpinners(),$.post(`/${a}:id2path`,{id:e.id},function(e){if(e){l.close();var s=`/${a}:${e}${t?"?a=view":""}`;l=mdui.dialog({title:"Path",content:`<a href = "${s}" >${e}</a>`,history:!1,modal:!0,closeOnEsc:!0,buttons:[{text:"Buka",onClick:function(){window.location.href=s}},{text:"Buka di tab baru",onClick:function(){window.open(s)}},{text:"Batal"}]});return}l.close(),l=mdui.dialog({title:'<i class="mdui-icon material-icons">&#xe811;</i>Gagal buat dapetin jalur target.',content:"o(╯□╰)o Ada kesalahan le, keknya file-nya belum ditambahin dah！",history:!1,modal:!0,closeOnEsc:!0,buttons:[{text:"WTF ???"}]})})}function get_file(e,t,a){var l="file_path_"+e+t.modifiedTime,s=localStorage.getItem(l);if(void 0!=s)return a(s);$.get(e,function(e){localStorage.setItem(l,e),a(e)})}function file(e){var t=e.split("/").pop().split(".").pop().toLowerCase().replace("?a=view","").toLowerCase();return"|html|php|css|go|java|js|json|txt|sh|md|".indexOf(`|${t}|`)>=0?file_code(e):"|mp4|webm|avi|mpg|mpeg|mkv|rm|rmvb|mov|wmv|asf|ts|flv|m3u8|".indexOf(`|${t}|`)>=0?file_video(e):"|mp3|flac|wav|ogg|m4a|".indexOf(`|${t}|`)>=0?file_audio(e):"|bmp|jpg|jpeg|png|gif|".indexOf(`|${t}|`)>=0?file_image(e):"pdf"===t?file_pdf(e):void 0}function file_code(e){var t={html:"html",php:"php",css:"css",go:"golang",java:"java",js:"javascript",json:"json",txt:"Text",sh:"sh",md:"Markdown"},a=e.split("/").pop().split(".").pop().toLowerCase(),l=window.location.origin+e,s=`
<div class="mdui-container">
<pre id="editor" ></pre>
</div>
<div class="mdui-textfield">
  <label class="mdui-textfield-label">URL Unduhan</label>
  <input class="mdui-textfield-input" type="text" value="${l}"/>
</div>
<a href="${l}" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">file_download</i></a>

<script src="https://cdn.staticfile.org/ace/1.4.7/ace.js"></script>
<script src="https://cdn.staticfile.org/ace/1.4.7/ext-language_tools.js"></script>
  `;$("#content").html(s),$.get(e,function(e){$("#editor").html($("<div/>").text(e).html());var l="Text";void 0!=t[a]&&(l=t[a]);var s=ace.edit("editor");s.setTheme("ace/theme/ambiance"),s.setFontSize(18),s.session.setMode("ace/mode/"+l),s.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0,enableLiveAutocompletion:!0,maxLines:1/0})})}function copyToClipboard(e){let t=$("<input>");$("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove()}function file_video(e){let t=window.location.origin+e;var a,l,s=t.split(".").pop().toLowerCase().toLowerCase(),d=t.replace(`.${s}`,""),n=d.split("/").pop();d=d.substring(0,d.lastIndexOf("/")+1);let r=[{text:"MXPlayer(Free)",href:`intent:${t}#Intent;package=com.mxtech.videoplayer.ad;S.title=${e};end`},{text:"MXPlayer(Pro)",href:`intent:${t}#Intent;package=com.mxtech.videoplayer.pro;S.title=${e};end`},{text:"nPlayer",href:`nplayer-${t}`},{text:"VLC",href:`vlc://${t}`},{text:"PotPlayer",href:`potplayer://${t}`}].map(e=>`<li class="mdui-menu-item"><a href="${e.href}" class="mdui-ripple">${e.text}</a></li>`).join("");r+=`<li class="mdui-divider"></li>
                   <li class="mdui-menu-item"><a id="copy-link" class="mdui-ripple">Salin tautan</a></li>`;let o=`
      <button class="mdui-btn mdui-ripple mdui-color-theme-accent" mdui-menu="{target:'#player-items'}">
        <i class="mdui-icon material-icons">&#xe039;</i>Pemutar Video Eksternal<i class="mdui-icon material-icons">&#xe5cf;</i>
      </button>
      <ul class="mdui-menu" id="player-items">${r}</ul>`,c=`
  <video id="player" class="mdui-video-fluid mdui-center" playsinline controls >
  </video>`,m=`
  <div id="dplayer" class="mdui-video-fluid mdui-center" ></div>
  `,u=ThemeConfig.player_dp;u.indexOf(`|${s}|`)>=0?(a=m,l="flv"==s?"customFlv":"m3u8"==s?"customHls":"mpd"==s?"customDash":"auto"):(a=c,l="mp4"==s?"mp4":"webm"==s?"webm":"ogg"==s?"ogg":"mp4");var p=ThemeConfig.video_cover;p="${fileName}"==(p=p.substring(p.indexOf("$"),p.lastIndexOf(".")))?(p=ThemeConfig.video_cover).substring(0,p.lastIndexOf("$"))+n+p.substring(p.lastIndexOf(".")):ThemeConfig.video_cover;var v=ThemeConfig.video_subtitle;v="${fileName}"==(v=v.substring(v.indexOf("$"),v.lastIndexOf(".")))?(v=ThemeConfig.video_subtitle).substring(0,v.lastIndexOf("$"))+n+v.substring(v.lastIndexOf(".")):ThemeConfig.video_subtitle;var f=`
<div class="mdui-container-fluid">
  <br>
  ${a}
  <br>${o}
  <!-- Pin Tags -->
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Unduhan</label>
    <input class="mdui-textfield-input" type="text" value="${t}"/>
  </div>
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Referensi HTML</label>
    <textarea class="mdui-textfield-input"><video><source src="${t}" type="video/mp4"></video></textarea>
  </div>
</div>
<a href="${t}" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">file_download</i></a>
  `;if($("#content").html(f),$("#copy-link").on("click",()=>{copyToClipboard(t),mdui.snackbar("Sudah disalin ke papan klip (clipboard)!")}),"m3u8"==s){let h=document.querySelector("video"),g=new Plyr(h,{controls:["play-large","restart","play","progress","current-time","duration","mute","volume","captions","settings","pip","fullscreen"],settings:["captions","quality","speed","loop"],i18n:{speed:"Kecepatan",normal:"Normal",quality:"Kualitas",captions:"Takarir",disabled:"Dinonaktifkan"},blankVideo:"https://cdn.plyr.io/static/blank.mp4",autoplay:!0,disableContextMenu:!1,loop:{active:!0},captions:{active:!0,update:!0,language:"auto"}});if(Hls.isSupported()){let b=new Hls;b.loadSource(t),b.attachMedia(h),window.hls=b,g.on("languagechange",()=>{setTimeout(()=>b.subtitleTrack=g.currentTrack,50)})}else h.src=t;window.player=g}else if("mpd"==s){let x=dashjs.MediaPlayer().create(),y=document.querySelector("video");x.initialize(y,t,!0);let k=new Plyr(y,{controls:["play-large","restart","play","progress","current-time","duration","mute","volume","captions","settings","pip","fullscreen"],settings:["captions","quality","speed","loop"],i18n:{speed:"Kecepatan",normal:"Normal",quality:"Kualitas",captions:"Takarir",disabled:"Dinonaktifkan"},blankVideo:"https://cdn.plyr.io/static/blank.mp4",autoplay:!0,disableContextMenu:!1,loop:{active:!0},captions:{active:!0,update:!0}});window.player=k,window.dash=x}else{let w=new Plyr("#player",{controls:["play-large","restart","play","progress","current-time","duration","mute","volume","captions","settings","pip","fullscreen"],settings:["captions","quality","speed","loop"],i18n:{speed:"Kecepatan",normal:"Normal",quality:"Kualitas",captions:"Takarir",disabled:"Dinonaktifkan"},blankVideo:"https://cdn.plyr.io/static/blank.mp4",autoplay:!0,disableContextMenu:!1,loop:{active:!0}});w.source={type:"video",sources:[{src:t,type:"video/"+l,size:1080},],poster:d+p,previewThumbnails:{enabled:!0,src:d+ThemeConfig.thumbnails[1].url},tracks:[{kind:"captions",label:"default",srclang:"cn",src:d+v,default:!0},]},window.player=w}new DPlayer({container:document.getElementById("dplayer"),autoplay:!0,theme:"#b7daff",loop:!0,lang:"zh-cn",screenshot:!0,hotkey:!0,preload:"auto",video:{pic:d+p,thumbnails:d+ThemeConfig.thumbnails[0].url,quality:[{name:"HD",url:t,type:l}],customType:{customHls:function(e,t){let a=new Hls;a.loadSource(e.src),a.attachMedia(e)},customFlv:function(e,t){let a=flvjs.createPlayer({type:"flv",url:e.src});a.attachMediaElement(e),a.load()},customDash:function(e,t){dashjs.MediaPlayer().create().initialize(e,e.src,!1)},shakaDash:function(e,t){var a=e.src;new shaka.Player(e).load(a)}},defaultQuality:0},subtitle:{url:d+v,type:"webvtt",fontSize:"25px",bottom:"10%",color:"#b7daff"}})}function file_audio(e){var t,a=window.location.origin+e,l=a.split(".").pop().toLowerCase().toLowerCase();let s=`
  <audio id="player" class="mdui-center" playsinline controls >
  </audio>`;var d=`
<div class="mdui-container-fluid">
  <br>
  `+s+`
  <br>
  <!-- Pin Tags -->
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Unduhan</label>
    <input class="mdui-textfield-input" type="text" value="${a}"/>
  </div>
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Referensi HTML</label>
    <textarea class="mdui-textfield-input"><audio><source src="${a}"></audio></textarea>
  </div>
</div>
<a href="${a}" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">file_download</i></a>
  `;$("#content").html(d),t="ogg"==l?"ogg":"mpeg";let n=new Plyr("audio",{i18n:{speed:"Kecepatan",normal:"Normal",quality:"Kualitas",captions:"Takarir",disabled:"Dinonaktifkan"}});n.source={type:"audio",sources:[{src:a,type:"audio/"+t},]},window.player=n}function file_pdf(e){let t=window.location.origin+e,a=`${t}?inline=true`,l=decodeURI(e.slice(e.lastIndexOf("/")+1,e.length));var s=`
  <object data="${a}" type="application/pdf" name="${l}" style="width:100%;height:94vh;"><embed src="${a}" type="application/pdf"/></object>
    <a href="${t}" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">file_download</i></a>
  `;$("#content").removeClass("mdui-container").addClass("mdui-container-fluid").css({padding:0}).html(s)}function file_image(e){var t=window.location.origin+e;let a=window.location.pathname,l=a.lastIndexOf("/"),s=a.slice(0,l+1),d=localStorage.getItem(s),n="";if(d){try{d=JSON.parse(d),Array.isArray(d)||(d=[])}catch(r){console.error(r),d=[]}if(d.length>0&&d.includes(e)){let o=d.length,c=d.indexOf(e),m=c-1>-1?d[c-1]:null,u=c+1<o?d[c+1]:null;n=`
            <div class="mdui-container">
                <div class="mdui-row-xs-2 mdui-m-b-1">
                    <div class="mdui-col">
                        ${m?`<button id="leftBtn" data-filepath="${m}" class="mdui-btn mdui-btn-block mdui-color-theme-accent mdui-ripple">上一张</button>`:`<button class="mdui-btn mdui-btn-block mdui-color-theme-accent mdui-ripple" disabled>上一张</button>`}
                    </div>
                    <div class="mdui-col">
                        ${u?`<button id="rightBtn"  data-filepath="${u}" class="mdui-btn mdui-btn-block mdui-color-theme-accent mdui-ripple">下一张</button>`:`<button class="mdui-btn mdui-btn-block mdui-color-theme-accent mdui-ripple" disabled>下一张</button>`}
                    </div> 
                </div>
            </div>
            `}}var p=`
<div class="mdui-container-fluid">
    <br>
    <div id="imgWrap">
        ${n}
      <img class="mdui-img-fluid" src="${t}"/>
    </div>
  <br>
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Unduhan</label>
    <input class="mdui-textfield-input" type="text" value="${t}"/>
  </div>
  <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Referensi HTML</label>
    <input class="mdui-textfield-input" type="text" value="<img src='${t}' />"/>
  </div>
        <div class="mdui-textfield">
    <label class="mdui-textfield-label">URL Referensi Markdown</label>
    <input class="mdui-textfield-input" type="text" value="![](${t})"/>
  </div>
        <br>
</div>
<a href="${t}" class="mdui-fab mdui-fab-fixed mdui-ripple mdui-color-theme-accent"><i class="mdui-icon material-icons">file_download</i></a>
    `;$("#content").html(p),$("#leftBtn, #rightBtn").click(e=>{let t=$(e.target);["I","SPAN"].includes(e.target.nodeName)&&(t=$(e.target).parent());let a=t.attr("data-filepath");t.attr("data-direction"),file(a)})}function utc2beijing(e){var t=e.indexOf("T"),a=e.indexOf("Z"),l=e.substr(0,t),s=e.substr(t+1,a-t-1);timestamp=(timestamp=new Date(Date.parse(l+" "+s))).getTime();var d=(timestamp/=1e3)+28800,d=new Date(1e3*d),n=1900+d.getYear(),r="0"+(d.getMonth()+1),o="0"+d.getDate(),c="0"+d.getHours(),m="0"+d.getMinutes(),u="0"+d.getSeconds();return n+"-"+r.substring(r.length-2,r.length)+"-"+o.substring(o.length-2,o.length)+" "+c.substring(c.length-2,c.length)+":"+m.substring(m.length-2,m.length)+":"+u.substring(u.length-2,u.length)}function formatFileSize(e){return e>=1e9?e=(e/1e9).toFixed(2)+" GB":e>=1e6?e=(e/1e6).toFixed(2)+" MB":e>=1e3?e=(e/1e3).toFixed(2)+" KB":e>1?e+=" bytes":1==e?e+=" byte":e="",e}function markdown(e,t){if(void 0==window.md)window.md=window.markdownit(),markdown(e,t);else{var a=md.render(t);$(e).show().html(a)}}String.prototype.trim=function(e){return e?this.replace(RegExp("^\\"+e+"+|\\"+e+"+$","g"),""):this.replace(/^\s+|\s+$/g,"")},window.onpopstate=function(){render(window.location.pathname)},$(function(){init(),render(window.location.pathname)});
